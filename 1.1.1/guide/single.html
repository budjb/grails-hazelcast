<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <title>Hazelcast Plugin 1.1.1</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />
        <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8" />
    <script type="text/javascript">
function addJsClass(el) {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
    </head>

    <body class="body" onload="addJsClass();">
        <div id="navigation">
            <ul>
                <li>
                    <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                        <a href="../guide/index.html" class="button">Table of contents</a>
                        <div id="nav-summary-childs" style="display:none;">
                            
                            <div class="toc-item" style="margin-left:0"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#configuration"><strong>2</strong><span>Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#factorybeans"><strong>3</strong><span>Hazelcast Factory Beans</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#hazelcastinstanceservice"><strong>4</strong><span>HazelcastInstanceService</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#changelog"><strong>5</strong><span>Changelog</span></a></div>
                            
                        </div>
                    </div>
                </li>
                <li class="separator selected">
                    <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
                </li>
            </ul>
        </div>
        <div id="header">
            <div class="images clearfix">
                
                
            </div>
            <p></p>
        </div>


        <table id="colset" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td id="col1">
                    <div id="main" class="corner-all">

                        <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                        <div class="project">
                            <h1>Hazelcast Plugin - Reference Documentation</h1>
                            <p><strong>Authors:</strong> Bud Byrd, Anil Manthina, Aaron Brown</p>
                            <p><strong>Version:</strong> 1.1.1</p>
                            
                        </div>

                        
                        <div id="table-of-content">
                            <h2>Table of Contents</h2>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#configuration"><strong>2</strong><span>Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#hazelcastinstance"><strong>2.1</strong><span>HazelcastInstance Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#factorybeans"><strong>3</strong><span>Hazelcast Factory Beans</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#hazelcastmapfactorybean"><strong>3.1</strong><span>HazelcastMapFactoryBean</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#hazelcastsetfactorybean"><strong>3.2</strong><span>HazelcastSetFactoryBean</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#hazelcastlistfactorybean"><strong>3.3</strong><span>HazelcastListFactoryBean</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#hazelcastlockfactorybean"><strong>3.4</strong><span>HazelcastLockFactoryBean</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#hazelcastinstanceservice"><strong>4</strong><span>HazelcastInstanceService</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#changelog"><strong>5</strong><span>Changelog</span></a></div>
                            
                            <div style="clear:both" ></div>
                        </div>
                        
                        

<h1 id="introduction">1 Introduction</h1>
The Hazelcast plugin for Grails provides Hazelcast integration using the Java libraries provided by the Hazelcast
project. It provides easy configuration of Hazelcast Instances and structures via a project's configuration, as well as
simple Hazelcast Instance management.<p class="paragraph"/>This plugin strives to provide an easy convention to follow to quickly begin creating and using various structures,
but still provide easy access to the underlying layer to allow users of this plugin to do whatever they need to do
outside of those conventions.<p class="paragraph"/>This guide details the configuration of the plugin, and may not fully explain the use and conventions of the Hazelcast
services or its Java library.  More information can be found <a href="https://hazelcast.org/" target="blank">here</a>.



<h1 id="configuration">2 Configuration</h1>
Configuration of Hazelcast instance is done in your project's <code>grails-app/conf/application.yml</code> file.



<h2 id="hazelcastinstance">2.1 HazelcastInstance Configuration</h2>
A configuration of the Hazelcast Instance might look like the following:<p class="paragraph"/><div class="code"><pre>hazelcast:
    instances:
      &#45; instanceName: myInstance
        groupConfig:
            name: myGroup
            password: secret
        networkConfig:
            join:
                multicastConfig:
                    enabled: <span class="java&#45;keyword">false</span>
        mapConfig:
            name: myMap
            timeToLiveSeconds: 600</pre></div><p class="paragraph"/>In general, the elements documented in <a href="
http://docs.hazelcast.org/docs/3.3/manual/html/config.html" target="blank">Hazelcast Configuration documentation</a> can be directly applied as a nested key-value DSL-Style
Configuration.



<h1 id="factorybeans">3 Hazelcast Factory Beans</h1>
The plugin provides a set of factory beans which can be used to easily create sturctures such as <code>Map</code>, <code>List</code>, and
<code>Set</code>, that are integrated with Hazelcast.



<h2 id="hazelcastmapfactorybean">3.1 HazelcastMapFactoryBean</h2>
The <strong class="bold">HazelcastMapFactoryBean</strong> can be used to create Hazelcast Maps as beans by declaring them in
<code>grails-app/init/&#60;package&#62;/Application.groovy</code>:<p class="paragraph"/><div class="code"><pre>class Application <span class="java&#45;keyword">extends</span> GrailsAutoConfiguration &#123;
    <span class="java&#45;keyword">static</span> void main(<span class="java&#45;object">String</span>&#91;&#93; args) &#123;
        GrailsApp.run(Application, args)
    &#125;<p class="paragraph"/>    @Override
    Closure doWithSpring() &#123;&#123;&#45;&#62;
        'myMap'(HazelcastMapFactoryBean) &#123;
            instanceName = 'myInstance'
            mapName = 'myMap'
        &#125;<p class="paragraph"/>        'myClass'(MyClass) &#123;
            // For Maps, it may be best to reference
            // rather than use @Autowired due to bean
            // validation logic.
            myMap = ref('myMap')
        &#125;
    &#125;&#125;
&#125;</pre></div><p class="paragraph"/>The bean can then be used in other managed Spring beans:<p class="paragraph"/><div class="code"><pre>class MyClass &#123;
    /&#42;&#42;
     &#42; MyMap
     &#42;/
    Map&#60;<span class="java&#45;object">String</span>, <span class="java&#45;object">Object</span>&#62; myMap<p class="paragraph"/>    cache(<span class="java&#45;object">String</span> key, <span class="java&#45;object">Object</span> value) &#123;
        myMap&#91;(key)&#91; = value
    &#125;<p class="paragraph"/>    <span class="java&#45;object">Object</span> fetch(<span class="java&#45;object">String</span> key) &#123;
        <span class="java&#45;keyword">return</span> myMap&#91;key&#93;
    &#125;
&#125;</pre></div>



<h2 id="hazelcastsetfactorybean">3.2 HazelcastSetFactoryBean</h2>
The <strong class="bold">HazelcastSetFactoryBean</strong> can be used to create Hazelcast Sets as beans by declaring them in
<code>grails-app/init/&#60;package&#62;/Application.groovy</code>:<p class="paragraph"/><div class="code"><pre>class Application <span class="java&#45;keyword">extends</span> GrailsAutoConfiguration &#123;
    <span class="java&#45;keyword">static</span> void main(<span class="java&#45;object">String</span>&#91;&#93; args) &#123;
        GrailsApp.run(Application, args)
    &#125;<p class="paragraph"/>    @Override
    Closure doWithSpring() &#123;&#123;&#45;&#62;
        'myLSet'(HazelcastSetFactoryBean) &#123;
            instanceName = 'myInstance'
            setName = 'mySet'
        &#125;
    &#125;&#125;
&#125;</pre></div><p class="paragraph"/>The bean can then be used in other managed Spring beans:<p class="paragraph"/><div class="code"><pre>class MyClass &#123;
    /&#42;&#42;
     &#42; MySet
     &#42;/
    @Autowired
    Set&#60;<span class="java&#45;object">String</span>&#62; mySet<p class="paragraph"/>    void process() &#123;
        mySet.putAll('foo', 'bar', 'baz')
        <span class="java&#45;object">String</span> foo = myList&#91;0&#93;
        myList &#60;&#60; &#91;'foo'&#93;
        myList&#91;0&#93; != myList&#91;&#45;1&#93;
    &#125;
&#125;</pre></div>



<h2 id="hazelcastlistfactorybean">3.3 HazelcastListFactoryBean</h2>
The <strong class="bold">HazelcastListFactoryBean</strong> can be used to create Hazelcast Lists as beans by declaring them in
<code>grails-app/init/&#60;package&#62;/Application.groovy</code>:<p class="paragraph"/><div class="code"><pre>class Application <span class="java&#45;keyword">extends</span> GrailsAutoConfiguration &#123;
    <span class="java&#45;keyword">static</span> void main(<span class="java&#45;object">String</span>&#91;&#93; args) &#123;
        GrailsApp.run(Application, args)
    &#125;<p class="paragraph"/>    @Override
    Closure doWithSpring() &#123;&#123;&#45;&#62;
        'myList'(HazelcastListFactoryBean) &#123;
            instanceName = 'myInstance'
            listName = 'myList'
        &#125;
    &#125;&#125;
&#125;</pre></div><p class="paragraph"/>The bean can then be used in other managed Spring beans:<p class="paragraph"/><div class="code"><pre>class MyClass &#123;
    /&#42;&#42;
     &#42; MyList
     &#42;/
    @Autowired
    List&#60;<span class="java&#45;object">String</span>&#62; myList<p class="paragraph"/>    void process() &#123;
        myList.putAll('foo', 'bar', 'baz')
        <span class="java&#45;object">String</span> foo = myList&#91;0&#93;
        myList &#60;&#60; &#91;'foo'&#93;
        myList&#91;0&#93; == myList&#91;&#45;1&#93;
    &#125;
&#125;</pre></div>



<h2 id="hazelcastlockfactorybean">3.4 HazelcastLockFactoryBean</h2>
The <strong class="bold">HazelcastLockFactoryBean</strong> can be used to create Hazelcast Locks as beans by declaring them in
<code>grails-app/init/&#60;package&#62;/Application.groovy</code>:<p class="paragraph"/><div class="code"><pre>class Application <span class="java&#45;keyword">extends</span> GrailsAutoConfiguration &#123;
    <span class="java&#45;keyword">static</span> void main(<span class="java&#45;object">String</span>&#91;&#93; args) &#123;
        GrailsApp.run(Application, args)
    &#125;<p class="paragraph"/>    @Override
    Closure doWithSpring() &#123;&#123;&#45;&#62;
        'myLLock'(HazelcastLockFactoryBean) &#123;
            instanceName = 'myInstance'
            lockName = 'myLock'
        &#125;
    &#125;&#125;
&#125;</pre></div><p class="paragraph"/>The bean can then be used in other managed Spring beans:<p class="paragraph"/><div class="code"><pre>@Slf4j
class MyClass &#123;
    /&#42;&#42;
     &#42; MyLock
     &#42;/
    @Autowired
    ILock myLock<p class="paragraph"/>    void process() &#123;
        <span class="java&#45;keyword">if</span> (!lock.tryLock(60000, TimeUnit.MILLISECONDS, 600000, TimeUnit.MILLISECONDS)) &#123;
            log.warn(<span class="java&#45;quote">"Lock failed."</span>)
            <span class="java&#45;keyword">return</span>
        &#125;<p class="paragraph"/>        <span class="java&#45;keyword">try</span> &#123;
            // &#8230;
        &#125; <span class="java&#45;keyword">catch</span> (Exception e) &#123;
            // &#8230;
        &#125; <span class="java&#45;keyword">finally</span> &#123;
            <span class="java&#45;keyword">try</span> &#123;
                lock.unlock()
                 log.trace(<span class="java&#45;quote">"Mutex lock released"</span>)
            &#125; <span class="java&#45;keyword">catch</span> (IllegalMonitorStateException ignored) &#123;
                log.warn(<span class="java&#45;quote">"lock expired"</span>)
            &#125;
        &#125;
    &#125;
&#125;</pre></div>



<h1 id="hazelcastinstanceservice">4 HazelcastInstanceService</h1>
The plugin provides a <strong class="bold">HazelcastInstanceService</strong> to help manage Hazelcast Instances.<p class="paragraph"/>The methods found within can be used to retrieve Hazelcast Instances, which provides access to the Hazelcast Instance
and its methods. There are also a light family of methods for shutting down one or all instances for convenience.



<h1 id="changelog">5 Changelog</h1>
<h3>1.1.1</h3>
<ul class="star">
<li>Moved the HazelcastService instantiation from Grails Lifecycle on Startup closer to HazelcastInstanceService</li>
</ul><p class="paragraph"/>instantiation.<p class="paragraph"/><h3>1.1.0</h3>
<ul class="star">
<li>Separated Hazelcast Configuration loading from Instance instantiation.</li>
</ul><p class="paragraph"/><h3>1.0.4</h3>
<ul class="star">
<li>Updated hazelcast library to version 3.8.3.</li>
</ul><p class="paragraph"/><h3>1.0.3</h3>
<ul class="star">
<li>Made <code>HazelcastInstanceService</code> and <code>HazelcastInstanceInstantiator</code> Groovy singletons.</li>
</ul><p class="paragraph"/><h3>1.0.2</h3>
<ul class="star">
<li>Add <code>getInstances()</code> method to <code>HazelcastInstanceService</code>.</li>
</ul><p class="paragraph"/><h3>1.0.1</h3>
<ul class="star">
<li>Create Hazelcast instances much earlier in the initialization process.</li>
</ul><p class="paragraph"/>

                    </div>
                </td>
                <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
            </tr>
        </table>

        <div id="footer">
            
            
        </div>



<script type="text/javascript" src="../js/docs.js"></script>

    </body>
</html>
